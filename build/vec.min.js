!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.vec=t():"undefined"!=typeof global?global.vec=t():"undefined"!=typeof self&&(self.vec=t())}(function(){var t,i,s;return function h(t,i,s){function n(e,o){if(!i[e]){if(!t[e]){var u=typeof require=="function"&&require;if(!o&&u)return u(e,!0);if(r)return r(e,!0);throw new Error("Cannot find module '"+e+"'")}var a=i[e]={exports:{}};t[e][0].call(a.exports,function(i){var s=t[e][1][i];return n(s?s:i)},a,a.exports,h,t,i,s)}return i[e].exports}var r=typeof require=="function"&&require;for(var e=0;e<s.length;e++)n(s[e]);return n}({1:[function(t,i,s){function h(t){}i.exports=h},{}],2:[function(t,i,s){var h=t("./Vector3");var n=t("./Matrix3");var r=t("./common");var e=typeof Int8Array!=="undefined"?new Int8Array([1,2,0]):[1,2,0];var o=typeof Float32Array!=="undefined"?new Float32Array([0,0,0]):[0,0,0];var u=new h(1,0,0);var y=new h(0,1,0);var x=new h;var c=[];function f(t,i,s,h){if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0;this.w=t.w||0}else{this.x=t||0;this.y=i||0;this.z=s||0;this.w=h||0}}var z=f.prototype;for(var v in r){z[v]=r[v]}z.rotationTo=function(t){var i=x.copy(this).dot(t);if(i<-.999999){if(x.copy(u).cross(a).len()<1e-6)x.copy(y).cross(a);x.normalize();return this.setAxisAngle(x,Math.PI)}else if(i>.999999){this.x=0;this.y=0;this.z=0;this.w=1;return this}else{x.cross(t);this.x=x.x;this.y=x.y;this.z=x.z;this.w=1+i;return this.normalize()}};z.setAxes=function(t,i,s){c[0]=i.x;c[3]=i.y;c[6]=i.z;c[1]=uquat.x;c[4]=uquat.y;c[7]=uquat.z;c[2]=t.x;c[5]=t.y;c[8]=t.z;return this.fromMat3(c).normalize()};z.identity=function(){this.x=this.y=this.z=0;this.w=1;return this};z.setAxisAngle=function(t,i){i=i*.5;var s=Math.sin(i);this.x=s*t.x;this.y=s*t.y;this.z=s*t.z;this.w=Math.cos(i);return this};z.multiply=function(t){var i=this.x,s=this.y,h=this.z,n=this.w,r=t.x,e=t.y,o=t.z,u=t.w;this.x=i*u+n*r+s*o-h*e;this.y=s*u+n*e+h*r-i*o;this.z=h*u+n*o+i*e-s*r;this.w=n*u-i*r-s*e-h*o;return this};z.slerp=function(t,i){var s=this.x,h=this.y,n=this.y,r=this.y,e=t.x,o=t.y,u=t.z,a=t.w;var y,x,c,f,z;x=s*e+h*o+n*u+r*a;if(x<0){x=-x;e=-e;o=-o;u=-u;a=-a}if(1-x>1e-6){y=Math.acos(x);c=Math.sin(y);f=Math.sin((1-i)*y)/c;z=Math.sin(i*y)/c}else{f=1-i;z=i}this.x=f*s+z*e;this.y=f*h+z*o;this.z=f*n+z*u;this.w=f*r+z*a;return this};z.invert=function(){var t=this.x,i=this.y,s=this.z,h=this.w,n=t*t+i*i+s*s+h*h,r=n?1/n:0;this.x=-t*r;this.y=-i*r;this.z=-s*r;this.w=h*r;return this};z.conjugate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};z.rotateX=function(t){t*=.5;var i=this.x,s=this.y,h=this.z,n=this.w,r=Math.sin(t),e=Math.cos(t);this.x=i*e+n*r;this.y=s*e+h*r;this.z=h*e-s*r;this.w=n*e-i*r;return this};z.rotateY=function(t){t*=.5;var i=this.x,s=this.y,h=this.z,n=this.w,r=Math.sin(t),e=Math.cos(t);this.x=i*e-h*r;this.y=s*e+n*r;this.z=h*e+i*r;this.w=n*e-s*r;return this};z.rotateZ=function(t){t*=.5;var i=this.x,s=this.y,h=this.z,n=this.w,r=Math.sin(t),e=Math.cos(t);this.x=i*e+s*r;this.y=s*e-i*r;this.z=h*e+n*r;this.w=n*e-h*r;return this};z.calculateW=function(){var t=this.x,i=this.y,s=this.z;this.x=t;this.y=i;this.z=s;this.w=-Math.sqrt(Math.abs(1-t*t-i*i-s*s));return this};z.fromMat3=function(t){var i=t[0]+t[4]+t[8];var s;if(i>0){s=Math.sqrt(i+1);this.w=.5*s;s=.5/s;this.x=(t[7]-t[5])*s;this.y=(t[2]-t[6])*s;this.z=(t[3]-t[1])*s}else{var h=0;if(t[4]>t[0])h=1;if(t[8]>t[h*3+h])h=2;var n=e[h];var r=e[n];s=Math.sqrt(t[h*3+h]-t[n*3+n]-t[r*3+r]+1);o[h]=.5*s;s=.5/s;o[n]=(t[n*3+h]+t[h*3+n])*s;o[r]=(t[r*3+h]+t[h*3+r])*s;this.x=o[0];this.y=o[1];this.z=o[2];this.w=(t[r*3+n]-t[n*3+r])*s}return this};z.idt=z.identity;z.sub=z.subtract;z.mul=z.multiply;z.len=z.length;z.lenSq=z.lengthSq;z.toString=function(){return"Quaternion("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};i.exports=f},{"./Matrix3":1,"./Vector3":4,"./common":6}],3:[function(t,i,s){function h(t,i){if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0}else{this.x=t||0;this.y=i||0}}var n=h.prototype;n.clone=function(){return new h(this.x,this.y)};n.copy=function(t){this.x=t.x;this.y=t.y;return this};n.set=function(t,i){this.x=t||0;this.y=i||0;return this};n.add=function(t){this.x+=t.x;this.y+=t.y;return this};n.subtract=function(t){this.x-=t.x;this.y-=t.y;return this};n.multiply=function(t){this.x*=t.x;this.y*=t.y;return this};n.scale=function(t){this.x*=t;this.y*=t;return this};n.divide=function(t){this.x/=t.x;this.y/=t.y;return this};n.negate=function(){this.x=-this.x;this.y=-this.y;return this};n.distance=function(t){var i=t.x-this.x,s=t.y-this.y;return Math.sqrt(i*i+s*s)};n.distanceSq=function(t){var i=t.x-this.x,s=t.y-this.y;return i*i+s*s};n.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)};n.lengthSq=function(){var t=this.x,i=this.y;return t*t+i*i};n.normalize=function(){var t=this.x,i=this.y;var s=t*t+i*i;if(s>0){s=1/Math.sqrt(s);this.x=t*s;this.y=i*s}return this};n.dot=function(t){return this.x*t.x+this.y*t.y};n.cross=function(t){return this.x*t.y-this.y*t.x};n.lerp=function(t,i){var s=this.x,h=this.y;i=i||0;this.x=s+i*(t.x-s);this.y=h+i*(t.y-h);return this};n.transformMat2=function(t){var i=this.x,s=this.y;this.x=t[0]*i+t[2]*s;this.y=t[1]*i+t[3]*s;return this};n.transformMat2d=function(t){var i=this.x,s=this.y;this.x=t[0]*i+t[2]*s+t[4];this.y=t[1]*i+t[3]*s+t[5];return this};n.transformMat3=function(t){var i=this.x,s=this.y;this.x=t[0]*i+t[2]*s+t[4];this.y=t[1]*i+t[3]*s+t[5];return this};n.transformMat4=function(t){var i=this.x,s=this.y;this.x=t[0]*i+t[4]*s+t[12];this.y=t[1]*i+t[5]*s+t[13];return this};n.sub=n.subtract;n.mul=n.multiply;n.div=n.divide;n.dist=n.distance;n.distSq=n.distanceSq;n.len=n.length;n.lenSq=n.lengthSq;n.toString=function(){return"Vector2("+this.x+", "+this.y+")"};n.random=function(t){t=t||1;var i=Math.random()*2*Math.PI;this.x=Math.cos(i)*t;this.y=Math.sin(i)*t;return this};i.exports=h},{}],4:[function(t,i,s){function h(t,i,s){if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0}else{this.x=t||0;this.y=i||0;this.z=s||0}}var n=h.prototype;n.clone=function(){return new h(this.x,this.y,this.z)};n.copy=function(t){this.x=t.x;this.y=t.y;this.z=t.z;return this};n.set=function(t,i,s){this.x=t||0;this.y=i||0;this.z=s||0;return this};n.add=function(t){this.x+=t.x;this.y+=t.y;this.z+=t.z;return this};n.subtract=function(t){this.x-=t.x;this.y-=t.y;this.z-=t.z;return this};n.multiply=function(t){this.x*=t.x;this.y*=t.y;this.z*=t.z;return this};n.scale=function(t){this.x*=t;this.y*=t;this.z*=t;return this};n.divide=function(t){this.x/=t.x;this.y/=t.y;this.z/=t.z;return this};n.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};n.distance=function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z;return Math.sqrt(i*i+s*s+h*h)};n.distanceSq=function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z;return i*i+s*s+h*h};n.length=function(){var t=this.x,i=this.y,s=this.z;return Math.sqrt(t*t+i*i+s*s)};n.lengthSq=function(){var t=this.x,i=this.y,s=this.z;return t*t+i*i+s*s};n.normalize=function(){var t=this.x,i=this.y,s=this.z;var h=t*t+i*i+s*s;if(h>0){h=1/Math.sqrt(h);this.x=t*h;this.y=i*h;this.z=s*h}return this};n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z};n.cross=function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z;this.x=s*e-h*r;this.y=h*n-i*e;this.z=i*r-s*n;return this};n.lerp=function(t,i){var s=this.x,h=this.y,n=this.z;i=i||0;this.x=s+i*(t.x-s);this.y=h+i*(t.y-h);this.z=n+i*(t.z-n);return this};n.transformMat4=function(t){var i=this.x,s=this.y,h=this.z;this.x=t[0]*i+t[4]*s+t[8]*h+t[12];this.y=t[1]*i+t[5]*s+t[9]*h+t[13];this.z=t[2]*i+t[6]*s+t[10]*h+t[14];return this};n.transformMat3=function(t){var i=this.x,s=this.y,h=this.z;this.x=i*t[0]+s*t[3]+h*t[6];this.y=i*t[1]+s*t[4]+h*t[7];this.z=i*t[2]+s*t[5]+h*t[8];return this};n.transformQuat=function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,o=t.w,u=o*i+r*h-e*s,a=o*s+e*i-n*h,y=o*h+n*s-r*i,x=-n*i-r*s-e*h;this.x=u*o+x*-n+a*-e-y*-r;this.y=a*o+x*-r+y*-n-u*-e;this.z=y*o+x*-e+u*-r-a*-n;return this};n.random=function(t){t=t||1;var i=Math.random()*2*Math.PI;var s=Math.random()*2-1;var h=Math.sqrt(1-s*s)*t;this.x=Math.cos(i)*h;this.y=Math.sin(i)*h;this.z=s*t;return this};n.sub=n.subtract;n.mul=n.multiply;n.div=n.divide;n.dist=n.distance;n.distSq=n.distanceSq;n.len=n.length;n.lenSq=n.lengthSq;n.toString=function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"};i.exports=h},{}],5:[function(t,i,s){var h=t("./common");function n(t,i,s,h){if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0;this.w=t.w||0}else{this.x=t||0;this.y=i||0;this.z=s||0;this.w=h||0}}var r=n.prototype;for(var e in h){r[e]=h[e]}r.clone=function(){return new n(this.x,this.y,this.z,this.w)};r.multiply=function(t){this.x*=t.x;this.y*=t.y;this.z*=t.z;this.w*=t.w;return this};r.divide=function(t){this.x/=t.x;this.y/=t.y;this.z/=t.z;this.w/=t.w;return this};r.distance=function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z,n=t.w-this.w;return Math.sqrt(i*i+s*s+h*h+n*n)};r.distanceSq=function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z,n=t.w-this.w;return i*i+s*s+h*h+n*n};r.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this};r.transformMat4=function(t){var i=this.x,s=this.y,h=this.z,n=this.w;this.x=t[0]*i+t[4]*s+t[8]*h+t[12]*n;this.y=t[1]*i+t[5]*s+t[9]*h+t[13]*n;this.z=t[2]*i+t[6]*s+t[10]*h+t[14]*n;this.w=t[3]*i+t[7]*s+t[11]*h+t[15]*n;return this};r.transformQuat=function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,o=t.w,u=o*i+r*h-e*s,a=o*s+e*i-n*h,y=o*h+n*s-r*i,x=-n*i-r*s-e*h;this.x=u*o+x*-n+a*-e-y*-r;this.y=a*o+x*-r+y*-n-u*-e;this.z=y*o+x*-e+u*-r-a*-n;return out};r.random=function(t){t=t||1;this.x=(Math.random()*2-1)*t;this.y=(Math.random()*2-1)*t;this.z=(Math.random()*2-1)*t;this.w=(Math.random()*2-1)*t;return this};r.sub=r.subtract;r.mul=r.multiply;r.div=r.divide;r.dist=r.distance;r.distSq=r.distanceSq;r.len=r.length;r.lenSq=r.lengthSq;r.toString=function(){return"Vector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};i.exports=n},{"./common":6}],6:[function(t,i,s){i.exports={copy:function(t){this.x=t.x;this.y=t.y;this.z=t.z;this.w=t.w;return this},set:function(t,i,s,h){this.x=t||0;this.y=i||0;this.z=s||0;this.w=h||0;return this},add:function(t){this.x+=t.x;this.y+=t.y;this.z+=t.z;this.w+=t.w;return this},subtract:function(t){this.x-=t.x;this.y-=t.y;this.z-=t.z;this.w-=t.w;return this},scale:function(t){this.x*=t;this.y*=t;this.z*=t;this.w*=t;return this},length:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return Math.sqrt(t*t+i*i+s*s+h*h)},lengthSq:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return t*t+i*i+s*s+h*h},normalize:function(){var t=this.x,i=this.y,s=this.z,h=this.w;var n=t*t+i*i+s*s+h*h;if(n>0){n=1/Math.sqrt(n);this.x=t*n;this.y=i*n;this.z=s*n;this.w=h*n}return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){var s=this.x,h=this.y,n=this.z,r=this.w;i=i||0;this.x=s+i*(t.x-s);this.y=h+i*(t.y-h);this.z=n+i*(t.z-n);this.w=r+i*(t.w-r);return this}}},{}],7:[function(t,i,s){i.exports={Vector2:t("./Vector2"),Vector3:t("./Vector3"),Vector4:t("./Vector4"),Quaternion:t("./Quaternion"),Matrix3:t("./Matrix3")}},{"./Matrix3":1,"./Quaternion":2,"./Vector2":3,"./Vector3":4,"./Vector4":5}]},{},[7])(7)});